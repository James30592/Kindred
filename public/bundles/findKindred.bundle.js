(()=>{"use strict";var t={733:(t,e,n)=>{n.d(e,{Yi:()=>a,_5:()=>o,tA:()=>c});var i=n(922);async function o(t){!function(t){t.classList.remove("fully-hidden"),setTimeout((()=>t.classList.remove("transparent")),10)}(t),await async function(t){await(0,i.hk)(t,"opacity")}(t)}async function a(t){!function(t){t.classList.add("transparent")}(t),await async function(t){await(0,i.hk)(t,"opacity"),t.classList.add("fully-hidden")}(t)}function c(t,e){return new Promise((async n=>{await a(t),await o(e),n()}))}},300:(t,e,n)=>{var i=n(733);class o{#t;#e;constructor(t){this.#t=t.querySelector(".pop-btn"),this.#e=t.querySelector(".pop-btn-content")}init(){this.#n(this.#t,this.#e)}#n(t,e){t.addEventListener("click",(()=>{this.#i(t,e)}),{once:!0})}async#i(t,e){await(0,i._5)(e),window.addEventListener("click",(async()=>{await(0,i.Yi)(e),this.#n(t,e)}),{once:!0})}}document.querySelectorAll(".pop-btn-container").forEach((t=>{new o(t).init()}))},922:(t,e,n)=>{function i(t,e=null){return new Promise((n=>{t.addEventListener("transitionend",(async o=>{e?(o.propertyName===e||await i(t,e),n()):n()}),{once:!0})}))}n.d(e,{hk:()=>i})}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,n),a.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=n(733);const e={_rebuildContentDiv(t){this._clearContentDiv(),this._buildContentDiv(t)},_clearContentDiv(){this._contentDiv.replaceChildren()},_showLoader(){return(0,t.tA)(this._contentDiv,this._loader)},_hideLoader(){return(0,t.tA)(this._loader,this._contentDiv)},async handleUpdateBtnClick(){const t=this._showLoader(),e=await this._getUpdatedSourceData();await t,this._rebuildContentDiv(e),this._hideLoader()},validateHandleUpdate(t,e){this._validateSelections()?(t.scrollIntoView({behavior:"smooth"}),this.handleUpdateBtnClick()):alert(e)}};class i{catTypes={};constructor(t=null,e=null){t&&(this.catTypes=t.catTypes),e&&this.#o(e)}#o(t){for(let e of t)for(let t of e.categories){const n={isRecommendable:t.isRecommendable};this.checkAndAddCategoryWithType(e.name,t.name,n)}}checkAndAddCategoryWithType(t,e,n=null){const i=this._doesCategoryOrTypeExist(t,e);"nor"===i?this._addTypeAndCategory(t,e,n):"typeOnly"===i&&this._addCategory(t,e,n)}cloneWithData(t,e){const n=new i,o=this.getAllCategories();for(let i of o){const o=i.categoryType,a=i.category,c=t(o,a,e);n.checkAndAddCategoryWithType(o,a,c)}return n}getAllCategories(t=!1){const e=[];for(let n in this.catTypes)for(let i in this.catTypes[n]?.categories){const o={categoryType:n,category:i};if(t){const t=this.catTypes[n].categories[i];for(let e in t)o[e]=t[e]}e.push(o)}return e}_doesCategoryOrTypeExist(t,e){return t in this.catTypes?e in(this.catTypes.categoryTypeName?.categories??[])?"typeAndCat":"typeOnly":"nor"}_addTypeAndCategory(t,e,n){this.catTypes[t]={categories:{}},this._addCategory(t,e,n)}_addCategory(t,e,n){this.catTypes[t].categories[e]=null,n&&this._setData(t,e,n)}_setData(t,e,n){this.catTypes[t].categories[e]={};for(let i in n)this.catTypes[t].categories[e][i]=n[i]}}class o{#a;categoryInfo;constructor(t){this.#a=t}getSelectedCategoryInfo(){let t=new i;return this.#a.forEach((function(e){if(e.checked){const n=e.getAttribute("name").split(".");t.checkAndAddCategoryWithType(n[0],n[1])}})),this.categoryInfo=t,this.categoryInfo}getNumSelected(){return Array.from(this.#a).reduce(((t,e)=>t+e.checked),0)}}class a{_mainDiv;_contentDiv;#c;#s;_loader;static#r="At least one category must be selected.";constructor(t){this._mainDiv=t,this._contentDiv=t.querySelector(".content"),this.#c=document.querySelector(".find-kindred-btn");const e=document.querySelectorAll(".category-checkbox");this.#s=new o(e),this._loader=t.querySelector(".loader")}init(){this.#c.addEventListener("click",(()=>{this.validateHandleUpdate(this._contentDiv,a.#r)}))}_validateSelections(){return this.#s.getNumSelected()>0}_buildContentDiv(t){for(let e of t){const t=this._createRow(e);this._contentDiv.appendChild(t)}}_createRow(t){const e=document.createElement("div");e.classList.add("kindred-item");const n=document.createElement("p"),i=document.createElement("p"),o=document.createElement("p"),a=document.createElement("p");return n.innerText=t.simInfo.simScore.toFixed(1),i.innerText=t.profileName,o.innerText=`${t.location.placeName}, ${t.location.country.long}`,a.innerText=t.simInfo.scoreDiff.toFixed(1),n.classList.add("sim-score"),e.append(n,i,o,a),e}async _findKindred(){const t=this.#s.getSelectedCategoryInfo(),e=await fetch("/find-kindred",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await e.json()}async _getUpdatedSourceData(){return await this._findKindred()}}Object.assign(a.prototype,e),n(300);const c=document.querySelector(".kindred-list");new a(c).init()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVMyRyxjQUFjLEtBQzdCSSxFQUFVL0csU0FBUzJHLGNBQWMsS0FXdkMsT0FUQUMsRUFBU0ksVUFBWVQsRUFBUVUsUUFBUUwsU0FBU00sUUFBUSxHQUN0REwsRUFBU0csVUFBWVQsRUFBUVksWUFDN0JMLEVBQUlFLFVBQVksR0FBR1QsRUFBUWEsU0FBU0MsY0FBY2QsRUFBUWEsU0FBU0UsUUFBUUMsT0FDM0VSLEVBQVFDLFVBQVlULEVBQVFVLFFBQVFPLFVBQVVOLFFBQVEsR0FFdEROLEVBQVNySSxVQUFVTSxJQUFJLGFBRXZCMkgsRUFBV2lCLE9BQU9iLEVBQVVDLEVBQVVDLEVBQUtDLEdBRXBDUCxDQUNULENBRUFwSSxxQkFDRSxNQUFNaUgsRUFBdUI3RixNQUFLLEVBQW9CNEYsMEJBRWhEc0MsUUFBc0JDLE1BQU0sZ0JBQWlCLENBQ2pEQyxPQUFRLE9BQ1JDLFFBQVMsQ0FBQyxlQUFnQixvQkFDMUJDLEtBQU1DLEtBQUtDLFVBQVUzQyxLQUt2QixhQUYwQnFDLEVBQWNPLE1BRzFDLENBR0E3Siw4QkFDRSxhQUFhb0IsS0FBSzBJLGNBQ3BCLEVBR0YvRyxPQUFPZ0gsT0FBT2xDLEVBQWdCeEUsVUFBV0csRyxPQ2pGekMsTUFBTXdHLEVBQWlCcEksU0FBU1AsY0FBYyxpQkFDdEIsSUFBSXdHLEVBQWdCbUMsR0FDNUIxSSxNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va2luZHJlZC8uL3NyYy9qcy9tb2R1bGVzL2ZhZGVUcmFuc2l0aW9ucy5tanMiLCJ3ZWJwYWNrOi8va2luZHJlZC8uL3NyYy9qcy9tb2R1bGVzL3BvcEJ0bnMubWpzIiwid2VicGFjazovL2tpbmRyZWQvLi9zcmMvc2hhcmVkSnMvdXRpbHMubWpzIiwid2VicGFjazovL2tpbmRyZWQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8va2luZHJlZC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8va2luZHJlZC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2tpbmRyZWQvLi9zcmMvanMvbW9kdWxlcy9raW5kcmVkUmVjc01peGluLm1qcyIsIndlYnBhY2s6Ly9raW5kcmVkLy4vc3JjL3NoYXJlZEpzL2NhdGVnb3J5SW5mby5tanMiLCJ3ZWJwYWNrOi8va2luZHJlZC8uL3NyYy9qcy9tb2R1bGVzL2NhdGVnb3J5Q2hlY2tib3hlcy5tanMiLCJ3ZWJwYWNrOi8va2luZHJlZC8uL3NyYy9qcy9tb2R1bGVzL2ZpbmRLaW5kcmVkL2ZpbmRLaW5kcmVkTGlzdC5tanMiLCJ3ZWJwYWNrOi8va2luZHJlZC8uL3NyYy9qcy9wYWdlcy9maW5kS2luZHJlZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBIZWxwZXIgZnVuY3Rpb25zIHRvIGFzc2lzdCB3aXRoIGZhZGluZyBpbiAvIG91dCBET00gZWxlbWVudHMuXHJcbmltcG9ydCB7IGF3YWl0VHJhbnNpdGlvbiB9IGZyb20gXCIuLi8uLi9zaGFyZWRKcy91dGlscy5tanNcIjtcclxuXHJcblxyXG5cclxuLy8gRmFkZSB0cmFuc2l0aW9uIGhlbHBlciBmdW5jdGlvbnMsIHVzZWQgd2l0aCB0cmFuc3BhcmVudCwgZnVsbHktaGlkZGVuIGFuZCBcclxuLy8gZmFkZS10cmFucyBjc3MgY2xhc3Nlcy5cclxuLy8gTWFrZXMgZGlzcGxheSBwcm9wZXJ0eSB2aXNpYmxlIGFuZCB0aGVuIHJlbW92ZXMgdHJhbnNwYXJlbmN5LlxyXG5leHBvcnQgZnVuY3Rpb24gZmFkZUluKGVsZW0pIHtcclxuICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJmdWxseS1oaWRkZW5cIik7XHJcbiAgc2V0VGltZW91dCgoKSA9PiBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJ0cmFuc3BhcmVudFwiKSwgMTApO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmluaXNoRmFkZUluKGVsZW0pIHtcclxuICBhd2FpdCBhd2FpdFRyYW5zaXRpb24oZWxlbSwgXCJvcGFjaXR5XCIpO1xyXG59XHJcblxyXG4vLyBGaW5pc2hlcyB3aGVuIGZhZGUgaW4gaXMgY29tcGxldGVkLlxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZnVsbHlGYWRlSW4oZWxlbSkge1xyXG4gIGZhZGVJbihlbGVtKTtcclxuICBhd2FpdCBmaW5pc2hGYWRlSW4oZWxlbSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmYWRlT3V0KGVsZW0pIHtcclxuICBlbGVtLmNsYXNzTGlzdC5hZGQoXCJ0cmFuc3BhcmVudFwiKTtcclxufVxyXG5cclxuLy8gRnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gb3BhY2l0eSB0cmFuc2l0aW9uIG9uIHRoZSBcclxuLy8gZ2l2ZW4gZWxlbWVudCBpcyBjb21wbGV0ZWQuIEFsc28gZnVsbHkgaGlkZXMgdGhlIGVsZW1lbnQuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaW5pc2hGYWRlT3V0KGVsZW0pIHtcclxuICBhd2FpdCBhd2FpdFRyYW5zaXRpb24oZWxlbSwgXCJvcGFjaXR5XCIpO1xyXG4gIGVsZW0uY2xhc3NMaXN0LmFkZChcImZ1bGx5LWhpZGRlblwiKTtcclxufVxyXG5cclxuLy8gRmFkZSBvdXQgYW5kIGZ1bGx5IGhpZGUgdGhlIGdpdmVuIGVsZW1lbnQuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmdWxseUZhZGVPdXQoZWxlbSkge1xyXG4gIGZhZGVPdXQoZWxlbSk7XHJcbiAgYXdhaXQgZmluaXNoRmFkZU91dChlbGVtKTtcclxufVxyXG5cclxuLy8gRmFkZXMgb3V0IGVsZW0xIGFuZCBmYWRlcyBpbiBlbGVtMiBvbmNlIHRyYW5zaXRpb24gY29tcGxldGVkLCBkb2Vzbid0IGZpbmlzaCBcclxuLy8gdW50aWwgZWxlbTIgZnVsbHkgZmFkZWQgaW4uIFJldHVybnMgcHJvbWlzZS5cclxuZXhwb3J0IGZ1bmN0aW9uIGZhZGVGcm9tVG8oZWxlbTEsIGVsZW0yKSB7XHJcbiAgY29uc3QgZmFkZUNvbXBsZXRlUHJvbWlzZSA9IG5ldyBQcm9taXNlKGFzeW5jIHJlc29sdmUgPT4ge1xyXG4gICAgYXdhaXQgZnVsbHlGYWRlT3V0KGVsZW0xKTtcclxuICAgIGF3YWl0IGZ1bGx5RmFkZUluKGVsZW0yKTtcclxuICAgIHJlc29sdmUoKTtcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIGZhZGVDb21wbGV0ZVByb21pc2U7XHJcbn0iLCJpbXBvcnQgeyBmdWxseUZhZGVJbiwgZnVsbHlGYWRlT3V0IH0gZnJvbSBcIi4vZmFkZVRyYW5zaXRpb25zLm1qc1wiO1xyXG5cclxuXHJcblxyXG4vLyBCdG4gd2l0aCBhc3NvY2lhdGVkIGNvbnRlbnQuIENvbnRlbnQgZmFkZXMgaW4gd2hlbiBidXR0b24gaXMgY2xpY2tlZCBhbmQgXHJcbi8vIGZhZGVzIG91dCB3aGVuIGFueXRoaW5nIGlzIGNsaWNrZWQuIFVzZWQgYnkgaW5mbyBidXR0b25zIGFuZCBuYXYgZHJvcGRvd24uXHJcbmNsYXNzIFBvcEJ0biB7XHJcbiAgI2J0bjtcclxuICAjY29udGVudDtcclxuXHJcbiAgY29uc3RydWN0b3IocG9wQnRuQ29udGFpbmVyKSB7XHJcbiAgICB0aGlzLiNidG4gPSBwb3BCdG5Db250YWluZXIucXVlcnlTZWxlY3RvcihcIi5wb3AtYnRuXCIpO1xyXG4gICAgdGhpcy4jY29udGVudCA9IHBvcEJ0bkNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLnBvcC1idG4tY29udGVudFwiKTtcclxuICB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLiNzZXR1cEluZm9CdG5DbGljayh0aGlzLiNidG4sIHRoaXMuI2NvbnRlbnQpO1xyXG4gIH1cclxuXHJcbiAgI3NldHVwSW5mb0J0bkNsaWNrKGJ0biwgY29udGVudCkge1xyXG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuI2hhbmRsZUluZm9CdG5DbGljayhidG4sIGNvbnRlbnQpO1xyXG4gICAgfSwge29uY2U6IHRydWV9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jICNoYW5kbGVJbmZvQnRuQ2xpY2soYnRuLCBjb250ZW50KSB7XHJcbiAgICBhd2FpdCBmdWxseUZhZGVJbihjb250ZW50KTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBmdWxseUZhZGVPdXQoY29udGVudCk7XHJcbiAgICAgIHRoaXMuI3NldHVwSW5mb0J0bkNsaWNrKGJ0biwgY29udGVudCk7XHJcbiAgICB9LCB7b25jZTogdHJ1ZX0pO1xyXG4gIH1cclxufVxyXG5cclxuLy8gSW5pdHMgYWxsIHBvcCBidG5zIG9uIGEgcGFnZS5cclxuZnVuY3Rpb24gc2V0dXBQb3BCdG5zKCkge1xyXG4gIGNvbnN0IHBvcEJ0bkNvbnRhaW5lcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcC1idG4tY29udGFpbmVyXCIpO1xyXG4gIFxyXG4gIHBvcEJ0bkNvbnRhaW5lcnMuZm9yRWFjaChwb3BCdG5Db250YWluZXIgPT4ge1xyXG4gICAgY29uc3QgcG9wQnRuID0gbmV3IFBvcEJ0bihwb3BCdG5Db250YWluZXIpO1xyXG4gICAgcG9wQnRuLmluaXQoKTtcclxuICB9KTtcclxufVxyXG5cclxuc2V0dXBQb3BCdG5zKCk7IiwiLy8gQ2xhbXAgbnVtYmVyIGJldHdlZW4gdHdvIHZhbHVlcy5cclxuZXhwb3J0IGZ1bmN0aW9uIGNsYW1wKG51bSwgbWluLCBtYXgpIHtcclxuICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgobnVtLCBtaW4pLCBtYXgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbGVycChzdGFydCwgZW5kLCBwcnBydG4gPSAwLjUpIHtcclxuICByZXR1cm4gc3RhcnQgKyAoKGVuZCAtIHN0YXJ0KSAqIHBycHJ0bik7XHJcbn1cclxuXHJcbi8vIEZvciBpbnRzLCBpdCBpcyBpbmNsdXNpdmUgb2Ygc3RhcnQgYW5kIG5vdCBpbmNsdXNpdmUgb2YgZW5kLlxyXG5leHBvcnQgZnVuY3Rpb24gcmFuZEJldHdlZW4oc3RhcnQgPSAwLCBlbmQgPSAxLCBpbnRzID0gZmFsc2UpIHtcclxuICBjb25zdCByYW5nZSA9IGVuZCAtIHN0YXJ0O1xyXG4gIGNvbnN0IHJhbmRGbG9hdCA9IChNYXRoLnJhbmRvbSgpICogcmFuZ2UpICsgc3RhcnQ7XHJcbiAgcmV0dXJuIGludHMgPyBNYXRoLmZsb29yKHJhbmRGbG9hdCkgOiByYW5kRmxvYXQ7XHJcbn1cclxuXHJcbi8vIFByb2JhYmlsaXR5IHNob3VsZCBiZSBhIGRlY2ltYWwsIHJldHVybnMgdHJ1ZSBvciBmYWxzZS5cclxuZXhwb3J0IGZ1bmN0aW9uIHRlc3RSYW5kb20ocHJvYmFiaWxpdHkpIHtcclxuICByZXR1cm4gKE1hdGgucmFuZG9tKCkgPD0gcHJvYmFiaWxpdHkpID8gdHJ1ZSA6IGZhbHNlO1xyXG59XHJcblxyXG4vLyBUYWtlcyBhIGxpc3Qgb2YgcHJvYiBvYmplY3RzIGFzIGlucHV0IGluIGZvcm1hdCB7bmFtZTogbmFtZSwgcHJvYjogcHJvYn0gYW5kIFxyXG4vLyByZXR1cm5zIG5hbWUgb2YgY2hvc2VuIHByb2JPYmosIG9yIGZhbHNlIGlmIG5vbmUgY2hvc2VuIChpbiBjYXNlIHRoYXQgcHJvYk9ianMgXHJcbi8vIHByb2JzIGRvbnQgc3VtIHRvIDEpLlxyXG5leHBvcnQgZnVuY3Rpb24gdGVzdFJhbmRNdWx0KC4uLnByb2JzKSB7XHJcbiAgY29uc3QgcHJvYnNPYmpzID0gW107XHJcbiAgbGV0IGN1cnJQcm9iU3RhcnQgPSAwO1xyXG5cclxuICBwcm9icy5mb3JFYWNoKHByb2IgPT4ge1xyXG4gICAgY29uc3QgdGhpc1Byb2IgPSB7XHJcbiAgICAgIG5hbWU6IHByb2IubmFtZSxcclxuICAgICAgc3RhcnQ6IGN1cnJQcm9iU3RhcnQsXHJcbiAgICAgIGVuZDogY3VyclByb2JTdGFydCArIHByb2IucHJvYlxyXG4gICAgfTtcclxuXHJcbiAgICBwcm9ic09ianMucHVzaCh0aGlzUHJvYik7XHJcblxyXG4gICAgY3VyclByb2JTdGFydCArPSBwcm9iO1xyXG4gIH0pO1xyXG5cclxuICBjb25zdCBjaG9zZW5WYWwgPSBNYXRoLnJhbmRvbSgpO1xyXG4gIGxldCByZXR1cm5WYWwgPSBmYWxzZTtcclxuXHJcbiAgcHJvYnNPYmpzLmZvckVhY2gocHJvYiA9PiB7XHJcbiAgICBjb25zdCBjaG9zZW5UaGlzUHJvYiA9IHByb2Iuc3RhcnQgPD0gY2hvc2VuVmFsICYmIHByb2IuZW5kID4gY2hvc2VuVmFsO1xyXG4gICAgaWYgKGNob3NlblRoaXNQcm9iKSB7XHJcbiAgICAgIHJldHVyblZhbCA9IHByb2IubmFtZTtcclxuICAgIH07XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiByZXR1cm5WYWw7XHJcbn1cclxuXHJcbi8vIFNlYXJjaGVzIGZvciBhIG5ld0l0ZW0gaW4gYW4gYXJyYXkgZ2l2ZW4gYW4gZWxlbUNvbXBGdW5jIHRoYXQgZGV0ZXJtaW5lcyBcclxuLy8gd2hldGhlciBpdCBpcyBwcmVzZW50IG9yIG5vdCAoZWcuIHRvIGZpbmQgYmFzZWQgb24gcXVlc3Rpb24gSUQpLiBJZiBwcmVzZW50LCBcclxuLy8gZWxlbWVudCBpbiBhcnJheSBpcyBvdmVyd3JpdHRlbiB3aXRoIG5ld0l0ZW0sIG90aGVyd2lzZSBuZXdJdGVtIGlzIHB1c2hlZCB0byBcclxuLy8gZW5kIG9mIGFycmF5LlxyXG5leHBvcnQgZnVuY3Rpb24gZmluZEFuZE92ZXJ3cml0ZUVsc2VQdXNoKGFycmF5LCBuZXdJdGVtLCBlbGVtQ29tcEZ1bmMpIHtcclxuICBjb25zdCBmb3VuZEluZGV4ID0gYXJyYXkuZmluZEluZGV4KGFyckl0ZW0gPT4gZWxlbUNvbXBGdW5jKGFyckl0ZW0sIG5ld0l0ZW0pKTtcclxuXHJcbiAgLy8gSWYgZm91bmQsIG92ZXJ3cml0ZS5cclxuICBpZiAoZm91bmRJbmRleCA+IC0xKSB7XHJcbiAgICBhcnJheS5zcGxpY2UoZm91bmRJbmRleCwgMSwgbmV3SXRlbSk7XHJcbiAgfVxyXG4gIC8vIE90aGVyd2lzZSBhZGQuXHJcbiAgZWxzZSB7XHJcbiAgICBhcnJheS5wdXNoKG5ld0l0ZW0pO1xyXG4gIH07XHJcbn1cclxuXHJcbi8vIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0cmFuc2l0aW9uIG9uIGdpdmVuIGVsZW1lbnQgZW5kcywgXHJcbi8vIG9wdGlvbmFsIHRyYW5zaXRpb24gcHJvcGVydHkgbmFtZSBjaGVjay5cclxuZXhwb3J0IGZ1bmN0aW9uIGF3YWl0VHJhbnNpdGlvbihlbGVtLCBwcm9wTmFtZSA9IG51bGwpIHtcclxuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIGFzeW5jIGV2dCA9PiB7XHJcblxyXG4gICAgICBpZiAocHJvcE5hbWUpIHtcclxuICAgICAgICBpZiAoZXZ0LnByb3BlcnR5TmFtZSA9PT0gcHJvcE5hbWUpIHtcclxuICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgYXdhaXQgYXdhaXRUcmFuc2l0aW9uKGVsZW0sIHByb3BOYW1lKTtcclxuICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgfSwge29uY2U6IHRydWV9KTtcclxuICB9KVxyXG59XHJcblxyXG4vLyBGb3IgdGVzdGluZyBsb25nIHJ1bm5pbmcgZnVuY3Rpb25zLlxyXG4vLyBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMzAwMCkpOyAvLy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJpbXBvcnQgeyBmYWRlRnJvbVRvIH0gZnJvbSBcIi4vZmFkZVRyYW5zaXRpb25zLm1qc1wiO1xyXG5cclxuXHJcblxyXG4vLyBVc2VkIGJ5IHRoZSByZWNvbW1lbmRhdGlvbnMgYW5kIGZpbmQga2luZHJlZCBwYWdlcyB0byBmYWRlIGJldHdlZW4gbG9hZGVycyBcclxuLy8gYW5kIG5ldyBjb250ZW50IHdoZW4gcmVmcmVzaGluZyByZWNvbW1lbmRhdGlvbnMgLyBraW5kcmVkLlxyXG5leHBvcnQgY29uc3Qga2luZHJlZFJlY3NNaXhpbiA9IHtcclxuICBfcmVidWlsZENvbnRlbnREaXYoZGF0YSkge1xyXG4gICAgdGhpcy5fY2xlYXJDb250ZW50RGl2KCk7XHJcbiAgICB0aGlzLl9idWlsZENvbnRlbnREaXYoZGF0YSk7XHJcbiAgfSxcclxuXHJcbiAgLy8gQ2xlYXIgdGhlIGNvbnRlbnQgaW4gdGhlIGxpc3QgZGl2LlxyXG4gIF9jbGVhckNvbnRlbnREaXYoKSB7XHJcbiAgICB0aGlzLl9jb250ZW50RGl2LnJlcGxhY2VDaGlsZHJlbigpO1xyXG4gIH0sXHJcblxyXG4gIF9zaG93TG9hZGVyKCkge1xyXG4gICAgcmV0dXJuIGZhZGVGcm9tVG8odGhpcy5fY29udGVudERpdiwgdGhpcy5fbG9hZGVyKTtcclxuICB9LFxyXG5cclxuICBfaGlkZUxvYWRlcigpIHtcclxuICAgIHJldHVybiBmYWRlRnJvbVRvKHRoaXMuX2xvYWRlciwgdGhpcy5fY29udGVudERpdik7XHJcbiAgfSxcclxuXHJcbiAgYXN5bmMgaGFuZGxlVXBkYXRlQnRuQ2xpY2soKSB7XHJcbiAgICBjb25zdCBsb2FkZXJTaG93biA9IHRoaXMuX3Nob3dMb2FkZXIoKTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLl9nZXRVcGRhdGVkU291cmNlRGF0YSgpO1xyXG5cclxuICAgIC8vIERvbid0IGhpZGUgdGhlIGxvYWRlciAvIHNob3cgdGhlIGNvbnRlbnQgdW50aWwgYm90aCB0aGUgbG9hZGVyIGhhcyBcclxuICAgIC8vIGZpbmlzaGVkIGZhZGluZyBpbiBBTkQgdGhlIGRvU3R1ZmYgaGFzIGJlZW4gY29tcGxldGVkLlxyXG4gICAgYXdhaXQgbG9hZGVyU2hvd247XHJcbiAgICB0aGlzLl9yZWJ1aWxkQ29udGVudERpdihkYXRhKTtcclxuICAgIHRoaXMuX2hpZGVMb2FkZXIoKTtcclxuICB9LFxyXG5cclxuICAvLyBWYWxpZGF0ZXMgYW5kIHRoZW4gaGFuZGxlcyB0aGUgcmVxdWVzdCB0byB1cGRhdGUsIG90aGVyd2lzZSBhbGVydHMgd2l0aCBcclxuICAvLyB0aGUgdmFsaWRhdGlvbiBtZXNzYWdlLlxyXG4gIHZhbGlkYXRlSGFuZGxlVXBkYXRlKHNjcm9sbEVsZW0sIGZhaWxWYWxpZGF0ZU1zZykge1xyXG4gICAgY29uc3QgaXNWYWxpZFNlbGVjdGlvbnMgPSB0aGlzLl92YWxpZGF0ZVNlbGVjdGlvbnMoKTtcclxuICAgIFxyXG4gICAgaWYgKGlzVmFsaWRTZWxlY3Rpb25zKSB7XHJcbiAgICAgIHNjcm9sbEVsZW0uc2Nyb2xsSW50b1ZpZXcoe2JlaGF2aW9yOiBcInNtb290aFwifSk7XHJcbiAgICAgIHRoaXMuaGFuZGxlVXBkYXRlQnRuQ2xpY2soKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBhbGVydChmYWlsVmFsaWRhdGVNc2cpO1xyXG4gICAgfTtcclxuICB9XHJcbn0iLCIvLyBDbGFzcyB0byBzdG9yZSBjYXRlZ29yeSB0eXBlIGFuZCBjYXRlZ29yeSBpbmZvIGluIGEgdHJlZSBzdHJ1Y3R1cmUgb2YgbmVzdGVkXHJcbi8vIG9iamVjdHMgZm9yIGFsbCBjYXRlZ29yaWVzIHByZXNlbnQuXHJcbmV4cG9ydCBjbGFzcyBDYXRlZ29yeUluZm8ge1xyXG4gIGNhdFR5cGVzID0ge307XHJcblxyXG4gIC8vIFdoZXJlIGNhdEluZm8gaXMgYW4gb3B0aW9uYWwgY2F0ZWdvcnkgaW5mbyBzdHlsZSBvYmplY3QgKGp1c3QgdGhlIGRhdGEsIG5vdCBcclxuICAvLyBhbiBhY3R1YWwgaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyAtIGZyb20gd2hlbiBzdHJpbmdpZmllZCBhbmQgc2VudCB1c2luZyBmZXRjaCkuXHJcbiAgLy8gZGJDYXRUeXBlcyBpcyBhIGxpc3Qgb2YgY2F0ZWdvcnlUeXBlIGRvY3VtZW50cyBhcyByZXR1cm5lZCBmcm9tIGRvaW5nIGZpbmQgXHJcbiAgLy8gb2YgY2F0ZWdvcnkgdHlwZXMgaW4gREIuXHJcbiAgY29uc3RydWN0b3IoY2F0SW5mbyA9IG51bGwsIGRiQ2F0VHlwZXMgPSBudWxsKSB7XHJcbiAgICBpZiAoY2F0SW5mbykge1xyXG4gICAgICB0aGlzLmNhdFR5cGVzID0gY2F0SW5mby5jYXRUeXBlcztcclxuICAgIH07XHJcblxyXG4gICAgaWYgKGRiQ2F0VHlwZXMpIHtcclxuICAgICAgdGhpcy4jY29uc3RydWN0RnJvbUNhdFR5cGVzKGRiQ2F0VHlwZXMpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vIENvbnN0cnVjdCB0aGlzIGNhdGVnb3J5IGluZm8gYmFzZWQgb24gYSBnaXZlbiBhcnJheSBvZiBjYXRlZ29yeSB0eXBlcyBhbmQgXHJcbiAgLy8gdGhlaXIgbmVzdGVkIGNhdGVnb3JpZXMgKGFzIGEgcmVzdWx0IG9mIGEgZGliIGZpbmQgb24gY2F0ZWdvcnkgdHlwZXMpLlxyXG4gICNjb25zdHJ1Y3RGcm9tQ2F0VHlwZXMoZGJDYXRUeXBlcykge1xyXG4gICAgZm9yIChsZXQgY2F0VHlwZSBvZiBkYkNhdFR5cGVzKSB7XHJcbiAgICAgIGZvciAobGV0IGNhdCBvZiBjYXRUeXBlLmNhdGVnb3JpZXMpIHtcclxuICAgICAgICBjb25zdCBpc1JlY0RhdGEgPSB7aXNSZWNvbW1lbmRhYmxlOiBjYXQuaXNSZWNvbW1lbmRhYmxlfTtcclxuICAgICAgICB0aGlzLmNoZWNrQW5kQWRkQ2F0ZWdvcnlXaXRoVHlwZShjYXRUeXBlLm5hbWUsIGNhdC5uYW1lLCBpc1JlY0RhdGEpO1xyXG4gICAgICB9O1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vIEdpdmVuIGEgY2F0ZWdvcnkgdHlwZSBhbmQgY2F0ZWdvcnksIGFkZHMgYm90aCwganVzdCB0aGUgY2F0ZWdvcnksIG9yXHJcbiAgLy8gbmVpdGhlciBvZiB0aGVtIGRlcGVuZGluZyBvbiB3aGF0IGFscmVhZHkgZXhpc3RzIGluIHRoaXMuXHJcbiAgLy8gZGF0YSBzaG91bGQgYmUgYW4gb2JqZWN0IGFuZCBhbGwgdGhlIGtleTogdmFsdWUgcGFpcnMgZnJvbSBkYXRhIHdpbGwgYmVcclxuICAvLyBhZGRlZCBpbiB0byB0aGUgQ2F0ZWdvcnlJbmZvIG9iamVjdCBhdCB0aGUgY29ycmVjdCBwbGFjZS5cclxuICBjaGVja0FuZEFkZENhdGVnb3J5V2l0aFR5cGUoY2F0ZWdvcnlUeXBlTmFtZSwgY2F0ZWdvcnlOYW1lLCBkYXRhID0gbnVsbCkge1xyXG4gICAgY29uc3QgY2F0T3JUeXBlRXhpc3RzID0gdGhpcy5fZG9lc0NhdGVnb3J5T3JUeXBlRXhpc3QoY2F0ZWdvcnlUeXBlTmFtZSwgY2F0ZWdvcnlOYW1lKTtcclxuICAgIGlmIChjYXRPclR5cGVFeGlzdHMgPT09IFwibm9yXCIpe1xyXG4gICAgICB0aGlzLl9hZGRUeXBlQW5kQ2F0ZWdvcnkoY2F0ZWdvcnlUeXBlTmFtZSwgY2F0ZWdvcnlOYW1lLCBkYXRhKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGNhdE9yVHlwZUV4aXN0cyA9PT0gXCJ0eXBlT25seVwiKXtcclxuICAgICAgdGhpcy5fYWRkQ2F0ZWdvcnkoY2F0ZWdvcnlUeXBlTmFtZSwgY2F0ZWdvcnlOYW1lLCBkYXRhKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvLyBDcmVhdGVzIGEgY2xvbmUgb2YgdGhpcyBjYXRlZ29yeSBpbmZvIG9iamVjdCBhbmQgcmV0dXJucyBpdCwgYWxvbmcgd2l0aCBuZXcgXHJcbiAgLy8gZGF0YSBmb3IgZWFjaCBjYXRlZ29yeSB3aGljaCBpcyBjYWxjdWxhdGVkIHVzaW5nIHRoZSBoaWdoZXIgb3JkZXIgZ2V0RGF0YUZ1bmMgYW5kIGFyZ3MuXHJcbiAgY2xvbmVXaXRoRGF0YShnZXREYXRhRnVuYywgYXJncykge1xyXG4gICAgY29uc3QgbmV3Q2F0SW5mbyA9IG5ldyBDYXRlZ29yeUluZm8oKTtcclxuXHJcbiAgICBjb25zdCBhbGxDYXRlZ29yaWVzV2l0aFR5cGVzID0gdGhpcy5nZXRBbGxDYXRlZ29yaWVzKCk7XHJcblxyXG4gICAgZm9yIChsZXQgY2F0ZWdvcnlXaXRoVHlwZSBvZiBhbGxDYXRlZ29yaWVzV2l0aFR5cGVzKSB7XHJcbiAgICAgIGNvbnN0IGNhdFR5cGVOYW1lID0gY2F0ZWdvcnlXaXRoVHlwZS5jYXRlZ29yeVR5cGU7XHJcbiAgICAgIGNvbnN0IGNhdGVnb3J5TmFtZSA9IGNhdGVnb3J5V2l0aFR5cGUuY2F0ZWdvcnk7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBnZXREYXRhRnVuYyhjYXRUeXBlTmFtZSwgY2F0ZWdvcnlOYW1lLCBhcmdzKTtcclxuXHJcbiAgICAgIG5ld0NhdEluZm8uY2hlY2tBbmRBZGRDYXRlZ29yeVdpdGhUeXBlKGNhdFR5cGVOYW1lLCBjYXRlZ29yeU5hbWUsIGRhdGEpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gbmV3Q2F0SW5mbztcclxuICB9XHJcblxyXG4gIC8vIFJldHVybnMgYW4gYXJyYXkgb2Ygb2JqZWN0cyB3aGVyZSBlYWNoIG9iamVjdCBjb250YWlucyB0aGVcclxuICAvLyBjYXRlZ29yeVR5cGVOYW1lIGFuZCBjYXRlZ29yeU5hbWUsIGZvciBldmVyeSB1bmlxdWUgY2F0ZWdvcnkgaW4gdGhpcy5cclxuICBnZXRBbGxDYXRlZ29yaWVzKGluY2xEYXRhID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IGFsbFVuaXF1ZUNhdGVnb3JpZXMgPSBbXTtcclxuXHJcbiAgICBmb3IgKGxldCBjYXRUeXBlIGluIHRoaXMuY2F0VHlwZXMpIHtcclxuICAgICAgZm9yIChsZXQgY2F0ZWdvcnkgaW4gdGhpcy5jYXRUeXBlc1tjYXRUeXBlXT8uY2F0ZWdvcmllcykge1xyXG4gICAgICAgIGNvbnN0IHRoaXNDYXRBbmRUeXBlID0ge1xyXG4gICAgICAgICAgY2F0ZWdvcnlUeXBlOiBjYXRUeXBlLFxyXG4gICAgICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKGluY2xEYXRhKSB7XHJcbiAgICAgICAgICBjb25zdCBjYXREYXRhID0gdGhpcy5jYXRUeXBlc1tjYXRUeXBlXS5jYXRlZ29yaWVzW2NhdGVnb3J5XTtcclxuICAgICAgICAgIGZvciAobGV0IGtleSBpbiBjYXREYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXNDYXRBbmRUeXBlW2tleV0gPSBjYXREYXRhW2tleV07XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGFsbFVuaXF1ZUNhdGVnb3JpZXMucHVzaCh0aGlzQ2F0QW5kVHlwZSk7XHJcbiAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBhbGxVbmlxdWVDYXRlZ29yaWVzO1xyXG4gIH1cclxuXHJcbiAgLy8gUmV0dXJucyBcInR5cGVBbmRDYXRcIiBpZiBjYXRlZ29yeVR5cGUgYW5kIGNhdGVnb3J5IGV4aXN0cyBpbiB0aGUgdHJlZSwgXCJ0eXBlT25seVwiIGlmIG9ubHlcclxuICAvLyB0aGUgY2F0ZWdvcnlUeXBlIGV4aXN0cyBhbmQgXCJub3JcIiBpZiBuZWl0aGVyIHRoZSBjYXRlZ29yeSBub3IgdGhlIGNhdGVnb3J5VHlwZSBleGlzdHMuXHJcbiAgX2RvZXNDYXRlZ29yeU9yVHlwZUV4aXN0KGNhdGVnb3J5VHlwZU5hbWUsIGNhdGVnb3J5TmFtZSl7XHJcbiAgICBpZiAoIShjYXRlZ29yeVR5cGVOYW1lIGluIHRoaXMuY2F0VHlwZXMpKSB7XHJcbiAgICAgIHJldHVybiBcIm5vclwiO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoIShjYXRlZ29yeU5hbWUgaW4gKHRoaXMuY2F0VHlwZXMuY2F0ZWdvcnlUeXBlTmFtZT8uY2F0ZWdvcmllcyA/PyBbXSkpKSB7XHJcbiAgICAgIHJldHVybiBcInR5cGVPbmx5XCI7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgcmV0dXJuIFwidHlwZUFuZENhdFwiO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIF9hZGRUeXBlQW5kQ2F0ZWdvcnkoY2F0ZWdvcnlUeXBlTmFtZSwgY2F0ZWdvcnlOYW1lLCBkYXRhKXtcclxuICAgIHRoaXMuY2F0VHlwZXNbY2F0ZWdvcnlUeXBlTmFtZV0gPSB7XHJcbiAgICAgIGNhdGVnb3JpZXM6IHt9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5fYWRkQ2F0ZWdvcnkoY2F0ZWdvcnlUeXBlTmFtZSwgY2F0ZWdvcnlOYW1lLCBkYXRhKTtcclxuICB9XHJcblxyXG4gIF9hZGRDYXRlZ29yeShjYXRlZ29yeVR5cGVOYW1lLCBjYXRlZ29yeU5hbWUsIGRhdGEpe1xyXG4gICAgdGhpcy5jYXRUeXBlc1tjYXRlZ29yeVR5cGVOYW1lXS5jYXRlZ29yaWVzW2NhdGVnb3J5TmFtZV0gPSBudWxsO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgdGhpcy5fc2V0RGF0YShjYXRlZ29yeVR5cGVOYW1lLCBjYXRlZ29yeU5hbWUsIGRhdGEpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIF9zZXREYXRhKGNhdGVnb3J5VHlwZU5hbWUsIGNhdGVnb3J5TmFtZSwgZGF0YSkge1xyXG4gICAgdGhpcy5jYXRUeXBlc1tjYXRlZ29yeVR5cGVOYW1lXS5jYXRlZ29yaWVzW2NhdGVnb3J5TmFtZV0gPSB7fTtcclxuICAgIGZvciAobGV0IGtleSBpbiBkYXRhKSB7XHJcbiAgICAgIHRoaXMuY2F0VHlwZXNbY2F0ZWdvcnlUeXBlTmFtZV0uY2F0ZWdvcmllc1tjYXRlZ29yeU5hbWVdW2tleV0gPSBkYXRhW2tleV07XHJcbiAgICB9O1xyXG4gIH1cclxufSIsImltcG9ydCB7IENhdGVnb3J5SW5mbyB9IGZyb20gXCIuLi8uLi9zaGFyZWRKcy9jYXRlZ29yeUluZm8ubWpzXCI7XHJcblxyXG5cclxuXHJcbi8vIE9iamVjdHMgdG8gcmVwcmVzZW50IGNoZWNrYm94IHNlbGVjdGlvbiBjaGVja2JveGVzIGZvciBhbGwgY2F0ZWdvcmllcyAvIFxyXG4vLyBjYXRlZ29yeSB0eXBlcy5cclxuZXhwb3J0IGNsYXNzIENhdGVnb3J5Q2hlY2tib3hlcyB7XHJcbiAgICAjY2hlY2tib3hlcztcclxuICAgIGNhdGVnb3J5SW5mbztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihjYXRlZ29yeUNoZWNrYm94ZXMpIHtcclxuICAgICAgICB0aGlzLiNjaGVja2JveGVzID0gY2F0ZWdvcnlDaGVja2JveGVzO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBHaXZlbiBhbiBhcnJheSBvZiBjaGVja2JveCBET00gb2JqZWN0cywgcmV0dXJucyBhIENhdGVnb3J5SW5mbyBvYmplY3RcclxuICAgIC8vIGNvbnRhaW5pbmcgaW5mb3JtYXRpb24gb24gYWxsIHNlbGVjdGVkIGNoZWNrYm94ZXMuXHJcbiAgICBnZXRTZWxlY3RlZENhdGVnb3J5SW5mbygpIHtcclxuICAgICAgICBsZXQgc2VsZWN0ZWRDYXRlZ29yeUluZm8gPSBuZXcgQ2F0ZWdvcnlJbmZvKCk7XHJcbiAgICAgIFxyXG4gICAgICAgIHRoaXMuI2NoZWNrYm94ZXMuZm9yRWFjaChmdW5jdGlvbihjaGVja2JveCl7XHJcbiAgICAgICAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkge1xyXG4gICAgICAgICAgICBjb25zdCBjYXRUeXBlQW5kQ2F0ID0gY2hlY2tib3guZ2V0QXR0cmlidXRlKFwibmFtZVwiKS5zcGxpdChcIi5cIik7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkQ2F0ZWdvcnlJbmZvLmNoZWNrQW5kQWRkQ2F0ZWdvcnlXaXRoVHlwZShjYXRUeXBlQW5kQ2F0WzBdLFxyXG4gICAgICAgICAgICAgIGNhdFR5cGVBbmRDYXRbMV0pO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNhdGVnb3J5SW5mbyA9IHNlbGVjdGVkQ2F0ZWdvcnlJbmZvO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhdGVnb3J5SW5mbztcclxuICAgIH1cclxuXHJcbiAgICBnZXROdW1TZWxlY3RlZCgpIHtcclxuICAgICAgY29uc3QgY2hlY2tCb3hlc0FyciA9IEFycmF5LmZyb20odGhpcy4jY2hlY2tib3hlcyk7XHJcbiAgICAgIHJldHVybiBjaGVja0JveGVzQXJyLnJlZHVjZSgodG90LCBjdXJyKSA9PiAodG90ICsgY3Vyci5jaGVja2VkKSwgMCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBraW5kcmVkUmVjc01peGluIH0gZnJvbSBcIi4uL2tpbmRyZWRSZWNzTWl4aW4ubWpzXCI7XHJcbmltcG9ydCB7IENhdGVnb3J5Q2hlY2tib3hlcyB9IGZyb20gXCIuLi9jYXRlZ29yeUNoZWNrYm94ZXMubWpzXCI7XHJcblxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBGaW5kS2luZHJlZExpc3Qge1xyXG4gIF9tYWluRGl2O1xyXG4gIF9jb250ZW50RGl2O1xyXG4gICNmaW5kS2luZHJlZEJ0bjtcclxuICAjY2F0ZWdvcnlDaGVja2JveGVzO1xyXG4gIF9sb2FkZXI7XHJcblxyXG4gIHN0YXRpYyAjSU5WQUxJRF9TRUxFQ1RTX01TRyA9IGBBdCBsZWFzdCBvbmUgY2F0ZWdvcnkgbXVzdCBiZSBzZWxlY3RlZC5gO1xyXG5cclxuICBjb25zdHJ1Y3RvcihtYWluRGl2KSB7XHJcbiAgICB0aGlzLl9tYWluRGl2ID0gbWFpbkRpdjtcclxuICAgIHRoaXMuX2NvbnRlbnREaXYgPSBtYWluRGl2LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudFwiKTtcclxuICAgIHRoaXMuI2ZpbmRLaW5kcmVkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5maW5kLWtpbmRyZWQtYnRuXCIpO1xyXG5cclxuICAgIGNvbnN0IGRvbUNhdENoZWNrYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhdGVnb3J5LWNoZWNrYm94XCIpO1xyXG4gICAgdGhpcy4jY2F0ZWdvcnlDaGVja2JveGVzID0gbmV3IENhdGVnb3J5Q2hlY2tib3hlcyhkb21DYXRDaGVja2JveGVzKTtcclxuXHJcbiAgICB0aGlzLl9sb2FkZXIgPSBtYWluRGl2LnF1ZXJ5U2VsZWN0b3IoXCIubG9hZGVyXCIpO1xyXG4gIH1cclxuICBcclxuICBpbml0KCkge1xyXG4gICAgdGhpcy4jZmluZEtpbmRyZWRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy52YWxpZGF0ZUhhbmRsZVVwZGF0ZSh0aGlzLl9jb250ZW50RGl2LCBcclxuICAgICAgICBGaW5kS2luZHJlZExpc3QuI0lOVkFMSURfU0VMRUNUU19NU0cpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBFbnN1cmUgYXQgbGVhc3Qgb25lIGNoZWNrYm94IGlzIHNlbGVjdGVkIGZvciBSZWMgZm9yIGFuZCBCYXNlZCBvbiBHcm91cHMuXHJcbiAgX3ZhbGlkYXRlU2VsZWN0aW9ucygpIHtcclxuICAgIGNvbnN0IG51bUNhdHMgPSB0aGlzLiNjYXRlZ29yeUNoZWNrYm94ZXMuZ2V0TnVtU2VsZWN0ZWQoKTtcclxuICAgIHJldHVybiAobnVtQ2F0cyA+IDApO1xyXG4gIH1cclxuXHJcbiAgX2J1aWxkQ29udGVudERpdihzaW1SYXRpbmdMaXN0KSB7XHJcbiAgICBmb3IgKGxldCBraW5kcmVkIG9mIHNpbVJhdGluZ0xpc3QpIHtcclxuICAgICAgY29uc3Qga2luZHJlZFJvdyA9IHRoaXMuX2NyZWF0ZVJvdyhraW5kcmVkKTtcclxuICAgICAgdGhpcy5fY29udGVudERpdi5hcHBlbmRDaGlsZChraW5kcmVkUm93KTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBfY3JlYXRlUm93KGtpbmRyZWQpIHsgICBcclxuICAgIGNvbnN0IGtpbmRyZWRSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAga2luZHJlZFJvdy5jbGFzc0xpc3QuYWRkKFwia2luZHJlZC1pdGVtXCIpO1xyXG5cclxuICAgIGNvbnN0IHNpbVNjb3JlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgICBjb25zdCB1c2VybmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gICAgY29uc3QgbG9jID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgICBjb25zdCBwb3NEaWZmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcblxyXG4gICAgc2ltU2NvcmUuaW5uZXJUZXh0ID0ga2luZHJlZC5zaW1JbmZvLnNpbVNjb3JlLnRvRml4ZWQoMSk7XHJcbiAgICB1c2VybmFtZS5pbm5lclRleHQgPSBraW5kcmVkLnByb2ZpbGVOYW1lO1xyXG4gICAgbG9jLmlubmVyVGV4dCA9IGAke2tpbmRyZWQubG9jYXRpb24ucGxhY2VOYW1lfSwgJHtraW5kcmVkLmxvY2F0aW9uLmNvdW50cnkubG9uZ31gO1xyXG4gICAgcG9zRGlmZi5pbm5lclRleHQgPSBraW5kcmVkLnNpbUluZm8uc2NvcmVEaWZmLnRvRml4ZWQoMSk7XHJcblxyXG4gICAgc2ltU2NvcmUuY2xhc3NMaXN0LmFkZChcInNpbS1zY29yZVwiKTtcclxuXHJcbiAgICBraW5kcmVkUm93LmFwcGVuZChzaW1TY29yZSwgdXNlcm5hbWUsIGxvYywgcG9zRGlmZik7XHJcblxyXG4gICAgcmV0dXJuIGtpbmRyZWRSb3c7XHJcbiAgfVxyXG5cclxuICBhc3luYyBfZmluZEtpbmRyZWQoKSB7XHJcbiAgICBjb25zdCBzZWxlY3RlZENhdGVnb3J5SW5mbyA9IHRoaXMuI2NhdGVnb3J5Q2hlY2tib3hlcy5nZXRTZWxlY3RlZENhdGVnb3J5SW5mbygpO1xyXG4gIFxyXG4gICAgY29uc3QgZmV0Y2hSZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2ZpbmQta2luZHJlZFwiLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoc2VsZWN0ZWRDYXRlZ29yeUluZm8pXHJcbiAgICB9KTtcclxuICBcclxuICAgIGNvbnN0IGtpbmRyZWRMaXN0ID0gYXdhaXQgZmV0Y2hSZXNwb25zZS5qc29uKCk7XHJcbiAgXHJcbiAgICByZXR1cm4ga2luZHJlZExpc3Q7ICBcclxuICB9XHJcblxyXG4gIC8vIFVzZWQgYnkgdGhlIG1peGluIHRvIGdldCBsYXRlc3Qga2luZHJlZC5cclxuICBhc3luYyBfZ2V0VXBkYXRlZFNvdXJjZURhdGEoKSB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fZmluZEtpbmRyZWQoKTsgIFxyXG4gIH1cclxufVxyXG5cclxuT2JqZWN0LmFzc2lnbihGaW5kS2luZHJlZExpc3QucHJvdG90eXBlLCBraW5kcmVkUmVjc01peGluKTsiLCJpbXBvcnQgeyBGaW5kS2luZHJlZExpc3QgfSBmcm9tIFwiLi4vbW9kdWxlcy9maW5kS2luZHJlZC9maW5kS2luZHJlZExpc3QubWpzXCI7XHJcbmltcG9ydCBcIi4vbG9nZ2VkSW5QYWdlLmpzXCI7XHJcblxyXG5cclxuXHJcbmNvbnN0IG1haW5LaW5kcmVkRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5raW5kcmVkLWxpc3RcIik7XHJcbmNvbnN0IHRoaXNLaW5kcmVkTGlzdCA9IG5ldyBGaW5kS2luZHJlZExpc3QobWFpbktpbmRyZWREaXYpO1xyXG50aGlzS2luZHJlZExpc3QuaW5pdCgpOyJdLCJuYW1lcyI6WyJhc3luYyIsImZ1bGx5RmFkZUluIiwiZWxlbSIsImNsYXNzTGlzdCIsInJlbW92ZSIsInNldFRpbWVvdXQiLCJmYWRlSW4iLCJmaW5pc2hGYWRlSW4iLCJmdWxseUZhZGVPdXQiLCJhZGQiLCJmYWRlT3V0IiwiZmluaXNoRmFkZU91dCIsImZhZGVGcm9tVG8iLCJlbGVtMSIsImVsZW0yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJQb3BCdG4iLCJjb25zdHJ1Y3RvciIsInBvcEJ0bkNvbnRhaW5lciIsInRoaXMiLCJxdWVyeVNlbGVjdG9yIiwiaW5pdCIsImJ0biIsImNvbnRlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwib25jZSIsIndpbmRvdyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJhd2FpdFRyYW5zaXRpb24iLCJwcm9wTmFtZSIsImV2dCIsInByb3BlcnR5TmFtZSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImtpbmRyZWRSZWNzTWl4aW4iLCJfcmVidWlsZENvbnRlbnREaXYiLCJkYXRhIiwiX2NsZWFyQ29udGVudERpdiIsIl9idWlsZENvbnRlbnREaXYiLCJfY29udGVudERpdiIsInJlcGxhY2VDaGlsZHJlbiIsIl9zaG93TG9hZGVyIiwiX2xvYWRlciIsIl9oaWRlTG9hZGVyIiwibG9hZGVyU2hvd24iLCJfZ2V0VXBkYXRlZFNvdXJjZURhdGEiLCJ2YWxpZGF0ZUhhbmRsZVVwZGF0ZSIsInNjcm9sbEVsZW0iLCJmYWlsVmFsaWRhdGVNc2ciLCJfdmFsaWRhdGVTZWxlY3Rpb25zIiwic2Nyb2xsSW50b1ZpZXciLCJiZWhhdmlvciIsImhhbmRsZVVwZGF0ZUJ0bkNsaWNrIiwiYWxlcnQiLCJDYXRlZ29yeUluZm8iLCJjYXRUeXBlcyIsImNhdEluZm8iLCJkYkNhdFR5cGVzIiwiY2F0VHlwZSIsImNhdCIsImNhdGVnb3JpZXMiLCJpc1JlY0RhdGEiLCJpc1JlY29tbWVuZGFibGUiLCJjaGVja0FuZEFkZENhdGVnb3J5V2l0aFR5cGUiLCJuYW1lIiwiY2F0ZWdvcnlUeXBlTmFtZSIsImNhdGVnb3J5TmFtZSIsImNhdE9yVHlwZUV4aXN0cyIsIl9kb2VzQ2F0ZWdvcnlPclR5cGVFeGlzdCIsIl9hZGRUeXBlQW5kQ2F0ZWdvcnkiLCJfYWRkQ2F0ZWdvcnkiLCJjbG9uZVdpdGhEYXRhIiwiZ2V0RGF0YUZ1bmMiLCJhcmdzIiwibmV3Q2F0SW5mbyIsImFsbENhdGVnb3JpZXNXaXRoVHlwZXMiLCJnZXRBbGxDYXRlZ29yaWVzIiwiY2F0ZWdvcnlXaXRoVHlwZSIsImNhdFR5cGVOYW1lIiwiY2F0ZWdvcnlUeXBlIiwiY2F0ZWdvcnkiLCJpbmNsRGF0YSIsImFsbFVuaXF1ZUNhdGVnb3JpZXMiLCJ0aGlzQ2F0QW5kVHlwZSIsImNhdERhdGEiLCJwdXNoIiwiX3NldERhdGEiLCJDYXRlZ29yeUNoZWNrYm94ZXMiLCJjYXRlZ29yeUluZm8iLCJjYXRlZ29yeUNoZWNrYm94ZXMiLCJnZXRTZWxlY3RlZENhdGVnb3J5SW5mbyIsInNlbGVjdGVkQ2F0ZWdvcnlJbmZvIiwiY2hlY2tib3giLCJjaGVja2VkIiwiY2F0VHlwZUFuZENhdCIsImdldEF0dHJpYnV0ZSIsInNwbGl0IiwiZ2V0TnVtU2VsZWN0ZWQiLCJBcnJheSIsImZyb20iLCJyZWR1Y2UiLCJ0b3QiLCJjdXJyIiwiRmluZEtpbmRyZWRMaXN0IiwiX21haW5EaXYiLCJzdGF0aWMiLCJtYWluRGl2IiwiZG9tQ2F0Q2hlY2tib3hlcyIsInNpbVJhdGluZ0xpc3QiLCJraW5kcmVkIiwia2luZHJlZFJvdyIsIl9jcmVhdGVSb3ciLCJhcHBlbmRDaGlsZCIsImNyZWF0ZUVsZW1lbnQiLCJzaW1TY29yZSIsInVzZXJuYW1lIiwibG9jIiwicG9zRGlmZiIsImlubmVyVGV4dCIsInNpbUluZm8iLCJ0b0ZpeGVkIiwicHJvZmlsZU5hbWUiLCJsb2NhdGlvbiIsInBsYWNlTmFtZSIsImNvdW50cnkiLCJsb25nIiwic2NvcmVEaWZmIiwiYXBwZW5kIiwiZmV0Y2hSZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwianNvbiIsIl9maW5kS2luZHJlZCIsImFzc2lnbiIsIm1haW5LaW5kcmVkRGl2Il0sInNvdXJjZVJvb3QiOiIifQ==